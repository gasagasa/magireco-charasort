{"version":3,"sources":["webpack:///./src/views/CharaSort.vue?dbb5","webpack:///./src/views/CharaSort.vue","webpack:///./src/views/CharaSort.vue?4ddd","webpack:///./src/views/CharaSort.vue?a3b2"],"names":["class","choose","lefts","rights","value","progress","max","restart","charaList","shuffle","array","i","length","k","Math","floor","random","nesting","map","chara","slice","name","props","msg","String","finalResults","tempResults","nextProcessingStocks","count","methods","this","shift","splice","initLeftsRights","isLeft","isRight","push","concat","startNextTurn","finish","window","confirm","localStorage","clear","$router","setItem","JSON","stringify","computed","temp","round","log","Number","isNaN","watch","saveLocalStorage","getItem","parse","render","__scopeId"],"mappings":"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","file":"js/chunk-5d075a38.ddd24068.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CharaSort.vue?vue&type=style&index=0&id=7af09aed&lang=scss&scoped=true\"","<template>\n  <section class=\"section\">\n    <div class=\"container is-widescreen has-text-centered\">\n      <div class=\"block\">\n        <p>途中経過はオートセーブされます。</p>\n      </div>\n      <div class=\"block\">\n        <button class=\"button choice\" @click=\"choose(true, false)\">\n          {{ lefts[0] }}\n        </button>\n        <button class=\"button choice\" @click=\"choose(false, true)\">\n          {{ rights[0] }}\n        </button>\n      </div>\n      <div class=\"block\">\n        <button class=\"button\" @click=\"choose(false, false)\">選べない！</button>\n      </div>\n      <div class=\"block\">\n        <progress class=\"progress is-primary\" :value=\"progress\" max=\"100\">\n          {{ progress }}\n        </progress>\n        進捗: {{ progress }}%\n        <p v-if=\"progress >= 100\">何故か知りませんが割と頻繁に進捗が100%を超えます。</p>\n      </div>\n      <hr>\n      <div class=\"block\">\n        <button class=\"button is-danger\" @click=\"restart\">やめる</button>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script lang=\"ts\">\n/* eslint-disable no-param-reassign */\nimport { defineComponent } from 'vue';\n\nlet charaList: string[] = [];\nfunction shuffle(array: Array<string>) {\n  // eslint-disable-next-line no-plusplus\n  for (let i = array.length; i > 1; i--) {\n    const k = Math.floor(Math.random() * i);\n    // eslint-disable-next-line no-param-reassign\n    [array[k], array[i - 1]] = [array[i - 1], array[k]];\n  }\n  return array;\n}\n\nfunction nesting(array: Array<string>) {\n  return array.map((chara) => [chara]).slice();\n}\n\nexport default defineComponent({\n  name: 'HelloWorld',\n  props: {\n    msg: String,\n  },\n  data() {\n    return {\n      // 最終結果配列\n      finalResults: [] as string[][],\n      // 一時結果配列\n      tempResults: [] as string[],\n      // 次に処理するストック配列\n      // 最初は[[いろは][やちよ][鶴乃]]みたいな状態\n      nextProcessingStocks: [[]] as string[][],\n      // 処理中左配列\n      lefts: [] as string[],\n      // 処理中右配列\n      rights: [] as string[],\n      count: 0,\n    };\n  },\n  methods: {\n    initLeftsRights() {\n      this.lefts = this.nextProcessingStocks.shift()!;\n      this.rights = this.nextProcessingStocks.shift()!;\n    },\n    startNextTurn() {\n      this.nextProcessingStocks = this.finalResults.slice();\n      this.finalResults.splice(0);\n      this.initLeftsRights();\n    },\n    choose(isLeft: boolean, isRight: boolean) {\n      if (isLeft) {\n        this.tempResults.push(this.lefts.shift()!);\n        this.count += 1;\n      } else if (isRight) {\n        this.tempResults.push(this.rights.shift()!);\n        this.count += 1;\n      } else {\n        this.tempResults.push(this.lefts.shift()!);\n        this.tempResults.push(this.rights.shift()!);\n        this.count += 2;\n      }\n\n      if (this.lefts.length && this.rights.length) {\n        return;\n      }\n\n      // 左もしくは右がなくなったら、残りを詰め込む\n      this.tempResults = this.tempResults.concat(this.lefts, this.rights);\n      this.finalResults.push(this.tempResults.slice());\n      this.tempResults.splice(0);\n\n      if (this.nextProcessingStocks.length >= 2) {\n        this.initLeftsRights();\n        return;\n      }\n\n      if (this.nextProcessingStocks.length === 1) {\n        this.finalResults.push(this.nextProcessingStocks.shift()!.slice());\n        this.startNextTurn();\n        return;\n      }\n\n      if (this.finalResults.length !== 1) {\n        this.startNextTurn();\n        return;\n      }\n\n      this.finish();\n    },\n    restart() {\n      // eslint-disable-next-line no-alert\n      if (!window.confirm('これまでの結果を破棄してトップに戻りますか？')) {\n        return;\n      }\n      localStorage.clear();\n      this.$router.push({ name: 'Home' });\n    },\n    finish() {\n      localStorage.setItem('result', JSON.stringify(this.finalResults.shift()));\n      this.$router.push({ name: 'CharasortResult' });\n    },\n    saveLocalStorage() {\n      localStorage.setItem('finalResults', JSON.stringify(this.finalResults));\n      localStorage.setItem('tempResults', JSON.stringify(this.tempResults));\n      localStorage.setItem('nextProcessingStocks', JSON.stringify(this.nextProcessingStocks));\n      localStorage.setItem('lefts', JSON.stringify(this.lefts));\n      localStorage.setItem('rights', JSON.stringify(this.rights));\n      localStorage.setItem('count', String(this.count));\n    },\n  },\n  computed: {\n    progress(): number {\n      const temp = Math.round((this.count / (charaList.length * Math.log(charaList.length))) * 100);\n      return Number.isNaN(temp) ? 0 : temp;\n    },\n  },\n  watch: {\n    count() {\n      this.saveLocalStorage();\n    },\n    finalResults() {\n      this.saveLocalStorage();\n    },\n    tempResults() {\n      this.saveLocalStorage();\n    },\n    nextProcessingStocks() {\n      this.saveLocalStorage();\n    },\n    lefts() {\n      this.saveLocalStorage();\n    },\n    rights() {\n      this.saveLocalStorage();\n    },\n  },\n  mounted() {\n    if (!localStorage.getItem('selectedCharactors')) {\n      this.$router.push({ name: 'Home' });\n      return;\n    }\n\n    charaList = JSON.parse(localStorage.getItem('selectedCharactors')!);\n\n    if (localStorage.getItem('count')) {\n      this.finalResults = JSON.parse(localStorage.getItem('finalResults')!);\n      this.tempResults = JSON.parse(localStorage.getItem('tempResults')!);\n      this.nextProcessingStocks = JSON.parse(localStorage.getItem('nextProcessingStocks')!);\n      this.lefts = JSON.parse(localStorage.getItem('lefts')!);\n      this.rights = JSON.parse(localStorage.getItem('rights')!);\n      this.count = Number(localStorage.getItem('count')!);\n\n      if (!this.nextProcessingStocks.length && this.finalResults.length === 1) {\n        this.finish();\n      }\n    } else {\n      this.nextProcessingStocks = nesting(shuffle(charaList));\n      this.initLeftsRights();\n    }\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.choice {\n  width: 8.2em;\n  height: 10em;\n  margin-left: 1em;\n  margin-right: 1em;\n  white-space: normal;\n}\n</style>\n","\n/* eslint-disable no-param-reassign */\nimport { defineComponent } from 'vue';\n\nlet charaList: string[] = [];\nfunction shuffle(array: Array<string>) {\n  // eslint-disable-next-line no-plusplus\n  for (let i = array.length; i > 1; i--) {\n    const k = Math.floor(Math.random() * i);\n    // eslint-disable-next-line no-param-reassign\n    [array[k], array[i - 1]] = [array[i - 1], array[k]];\n  }\n  return array;\n}\n\nfunction nesting(array: Array<string>) {\n  return array.map((chara) => [chara]).slice();\n}\n\nexport default defineComponent({\n  name: 'HelloWorld',\n  props: {\n    msg: String,\n  },\n  data() {\n    return {\n      // 最終結果配列\n      finalResults: [] as string[][],\n      // 一時結果配列\n      tempResults: [] as string[],\n      // 次に処理するストック配列\n      // 最初は[[いろは][やちよ][鶴乃]]みたいな状態\n      nextProcessingStocks: [[]] as string[][],\n      // 処理中左配列\n      lefts: [] as string[],\n      // 処理中右配列\n      rights: [] as string[],\n      count: 0,\n    };\n  },\n  methods: {\n    initLeftsRights() {\n      this.lefts = this.nextProcessingStocks.shift()!;\n      this.rights = this.nextProcessingStocks.shift()!;\n    },\n    startNextTurn() {\n      this.nextProcessingStocks = this.finalResults.slice();\n      this.finalResults.splice(0);\n      this.initLeftsRights();\n    },\n    choose(isLeft: boolean, isRight: boolean) {\n      if (isLeft) {\n        this.tempResults.push(this.lefts.shift()!);\n        this.count += 1;\n      } else if (isRight) {\n        this.tempResults.push(this.rights.shift()!);\n        this.count += 1;\n      } else {\n        this.tempResults.push(this.lefts.shift()!);\n        this.tempResults.push(this.rights.shift()!);\n        this.count += 2;\n      }\n\n      if (this.lefts.length && this.rights.length) {\n        return;\n      }\n\n      // 左もしくは右がなくなったら、残りを詰め込む\n      this.tempResults = this.tempResults.concat(this.lefts, this.rights);\n      this.finalResults.push(this.tempResults.slice());\n      this.tempResults.splice(0);\n\n      if (this.nextProcessingStocks.length >= 2) {\n        this.initLeftsRights();\n        return;\n      }\n\n      if (this.nextProcessingStocks.length === 1) {\n        this.finalResults.push(this.nextProcessingStocks.shift()!.slice());\n        this.startNextTurn();\n        return;\n      }\n\n      if (this.finalResults.length !== 1) {\n        this.startNextTurn();\n        return;\n      }\n\n      this.finish();\n    },\n    restart() {\n      // eslint-disable-next-line no-alert\n      if (!window.confirm('これまでの結果を破棄してトップに戻りますか？')) {\n        return;\n      }\n      localStorage.clear();\n      this.$router.push({ name: 'Home' });\n    },\n    finish() {\n      localStorage.setItem('result', JSON.stringify(this.finalResults.shift()));\n      this.$router.push({ name: 'CharasortResult' });\n    },\n    saveLocalStorage() {\n      localStorage.setItem('finalResults', JSON.stringify(this.finalResults));\n      localStorage.setItem('tempResults', JSON.stringify(this.tempResults));\n      localStorage.setItem('nextProcessingStocks', JSON.stringify(this.nextProcessingStocks));\n      localStorage.setItem('lefts', JSON.stringify(this.lefts));\n      localStorage.setItem('rights', JSON.stringify(this.rights));\n      localStorage.setItem('count', String(this.count));\n    },\n  },\n  computed: {\n    progress(): number {\n      const temp = Math.round((this.count / (charaList.length * Math.log(charaList.length))) * 100);\n      return Number.isNaN(temp) ? 0 : temp;\n    },\n  },\n  watch: {\n    count() {\n      this.saveLocalStorage();\n    },\n    finalResults() {\n      this.saveLocalStorage();\n    },\n    tempResults() {\n      this.saveLocalStorage();\n    },\n    nextProcessingStocks() {\n      this.saveLocalStorage();\n    },\n    lefts() {\n      this.saveLocalStorage();\n    },\n    rights() {\n      this.saveLocalStorage();\n    },\n  },\n  mounted() {\n    if (!localStorage.getItem('selectedCharactors')) {\n      this.$router.push({ name: 'Home' });\n      return;\n    }\n\n    charaList = JSON.parse(localStorage.getItem('selectedCharactors')!);\n\n    if (localStorage.getItem('count')) {\n      this.finalResults = JSON.parse(localStorage.getItem('finalResults')!);\n      this.tempResults = JSON.parse(localStorage.getItem('tempResults')!);\n      this.nextProcessingStocks = JSON.parse(localStorage.getItem('nextProcessingStocks')!);\n      this.lefts = JSON.parse(localStorage.getItem('lefts')!);\n      this.rights = JSON.parse(localStorage.getItem('rights')!);\n      this.count = Number(localStorage.getItem('count')!);\n\n      if (!this.nextProcessingStocks.length && this.finalResults.length === 1) {\n        this.finish();\n      }\n    } else {\n      this.nextProcessingStocks = nesting(shuffle(charaList));\n      this.initLeftsRights();\n    }\n  },\n});\n","import { render } from \"./CharaSort.vue?vue&type=template&id=7af09aed&scoped=true\"\nimport script from \"./CharaSort.vue?vue&type=script&lang=ts\"\nexport * from \"./CharaSort.vue?vue&type=script&lang=ts\"\n\nimport \"./CharaSort.vue?vue&type=style&index=0&id=7af09aed&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-7af09aed\"\n\nexport default script"],"sourceRoot":""}